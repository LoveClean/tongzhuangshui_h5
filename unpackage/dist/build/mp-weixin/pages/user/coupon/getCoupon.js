(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/coupon/getCoupon"],{"35b9":function(t,e,o){},3706:function(t,e,o){"use strict";o.r(e);var a=o("e902"),s=o("fc10");for(var i in s)"default"!==i&&function(t){o.d(e,t,function(){return s[t]})}(i);o("559d");var n=o("2877"),c=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,null,null);e["default"]=c.exports},"559d":function(t,e,o){"use strict";var a=o("35b9"),s=o.n(a);s.a},dece:function(t,e,o){"use strict";o("4436");var a=i(o("b0ce")),s=i(o("3706"));function i(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(s.default))},e902:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",[t._m(0),t.row.couponsName?o("view",{staticClass:"row"},[o("view",{staticClass:"carrier"},[o("view",{staticClass:"left"},[o("view",{staticClass:"title"},[t._v(t._s(t.row.couponsName))]),o("view",{staticClass:"term"},[t._v(t._s(t.row.effectiveDate)+" ~ "+t._s(t.row.expiryDate))]),o("view",{staticClass:"gap-top"}),o("view",{staticClass:"gap-bottom"})]),o("view",{staticClass:"right",class:4===t.row.couponsScope?"":"onlyShop",attrs:{eventid:"d1c18232-0"},on:{tap:function(e){t.toCart()}}},[o("view",{staticClass:"ticket"},[o("view",{staticClass:"num"},[t._v(t._s(t.row.couponsAmount))]),o("view",{staticClass:"unit"},[t._v("元")])]),0!==t.row.minimumAmount?o("view",{staticClass:"criteria"},[t._v("满"+t._s(t.row.minimumAmount)+"使用")]):t._e(),0===t.row.minimumAmount?o("view",{staticClass:"criteria"},[t._v("无门槛")]):t._e(),o("view",{staticClass:"use",class:4===t.row.couponsScope?"":"onlyShop"},[t._v("去使用")])])])]):t._e(),o("view",{staticClass:"row2"},[o("view",[o("label",{staticClass:"title"},[t._v("---------------活动规则---------------")]),o("ol",[o("li",[t._v("1. 下单即可享受红包立减优惠；")]),o("li",[t._v("2. 每个分享红包链接仅限10人领取；")]),o("li",[t._v("3. 每人只有1次领取红包机会；")]),o("li",[t._v("4. 红包仅限在线支付使用，且收货人手机号、领取红包时输入的手机号和账号中的手机号需为同一手机号；")]),o("li",[t._v("5. 红包可以与满减、折扣等其他优惠叠加使用，首单红包不可叠加使用；")]),o("li",[t._v("6. 红包可以在来一桶水小程序下单时选择在线支付时使用；")]),o("li",[t._v("7. 其他未尽事宜，请咨询客服85222235")])],1)],1)])])},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",[o("image",{staticStyle:{width:"750rpx",height:"450rpx","background-color":"#f5f5f5"},attrs:{src:"../../../static/img/coupon/top2.gif",mode:"aspectFit"}})])}];o.d(e,"a",function(){return a}),o.d(e,"b",function(){return s})},f568:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{row:{},couponsId:0}},onHide:function(){this.toCart()},onShareAppMessage:function(t){return{title:"【来一桶水】快捷定水专享红包，不仅是快更能省钱!",path:"/pages/user/coupon/getCoupon?couponsId="+this.couponsId,imageUrl:"../../../static/img/coupon/top2.gif"}},onLoad:function(e){var o=this;this.couponsId=e.couponsId,t.showShareMenu({withShareTicket:!0}),t.showLoading({title:"加载中"}),t.login({provider:"weixin",success:function(e){t.request({url:o.$tempUrl+"wechat/getOpenIdXcx",data:{appid:"wxc04f9bfb1157e062",secret:"9258da2f76f0de7ff1b3d740be743128",js_code:e.code,grant_type:"authorization_code"},method:"GET",success:function(e){t.setStorageSync("openId",e.data.openid),t.request({url:o.$tempUrl+"user/insert?wechatOpenid="+t.getStorageSync("openId"),method:"POST",success:function(e){t.request({url:o.$tempUrl+"buyer/coupons/receive",method:"POST",data:{couponsId:o.couponsId,openId:t.getStorageSync("openId")},success:function(e){switch(t.hideLoading(),e.data.code){case 0:o.row=e.data.data;break;case 401:case 403:o.showFail("来晚了,优惠券已被领完啦!");break;case 405:o.showFail("您已领取过此券,请勿重复领取!");break;default:o.showFail(e.data.message);break}}})}})}})}})},methods:{toCart:function(){t.reLaunch({url:"../../tabBar/cart"})},showFail:function(e){t.showModal({title:"失败",content:e,showCancel:!1,success:function(e){e.confirm&&t.reLaunch({url:"../../tabBar/user"})}})}}};e.default=o}).call(this,o("543d")["default"])},fc10:function(t,e,o){"use strict";o.r(e);var a=o("f568"),s=o.n(a);for(var i in a)"default"!==i&&function(t){o.d(e,t,function(){return a[t]})}(i);e["default"]=s.a}},[["dece","common/runtime","common/vendor"]]]);